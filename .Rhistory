select(-year)
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year)
inner_join(gapminder_Data_2007, co2_emissions)
inner_join(gapminder_data_2007, co2_emissions)
inner_join(gapminder_data_2007, co2_emissions, by = 'country')
anti_join(gapminder_data_2007, co2_emissions, by = 'country')
View(co2_emissions)
View(co2_emissions)
# Bolivia, the US and Venezuela have extra text, Puerto Rico isn't a country, so it isn't included in co2_emissions
#
# co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of' = 'Bolivia'),
'United States of America' = 'United States',
'Venezuela (Boliv. Rep. of)' = 'Venezuela')
# Bolivia, the US and Venezuela have extra text, Puerto Rico isn't a country, so it isn't included in co2_emissions
#
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of' = 'Bolivia'),
'United States of America' = 'United States',
'Venezuela (Boliv. Rep. of)' = 'Venezuela')
anti_join(gapminder_data_2007, co2_emissions, by = 'country')
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of' = 'Bolivia'),
'United States of America' = 'United States',
'Venezuela (Boliv. Rep. of)' = 'Venezuela')
anti_join(gapminder_data_2007, co2_emissions, by = 'country')
# Bolivia, the US and Venezuela have extra text, Puerto Rico isn't a country, so it isn't included in co2_emissions
#
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of)' = 'Bolivia'),
'United States of America' = 'United States',
'Venezuela (Boliv. Rep. of)' = 'Venezuela')
anti_join(gapminder_data_2007, co2_emissions, by = 'country')
gapminder_data_2007 %>%
mutate(country = recode(country, 'Puerto Rico' = 'United States')) %>%
group_by(country) %>%
summarize(lifeExp = sum(lifeExp * pop)/sum(pop),
gdpPercap = sum(gdpPercap * pop)/sum(pop),
pop = sum(pop))
# Bolivia, the US and Venezuela have extra text, Puerto Rico isn't a country, so it isn't included in co2_emissions
#
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of)' = 'Bolivia'),
'United States of America' = 'United States',
'Venezuela (Boliv. Rep. of)' = 'Venezuela')
# Bolivia, the US and Venezuela have extra text, Puerto Rico isn't a country, so it isn't included in co2_emissions
#
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of)' = 'Bolivia'),
'United States of America
' = 'United States',
'Venezuela (Boliv. Rep. of)
' = 'Venezuela')
'Venezuela (Boliv. Rep. of)' = 'Venezuela')
# Bolivia, the US and Venezuela have extra text, Puerto Rico isn't a country, so it isn't included in co2_emissions
#
co2_emissions <-
co2_emissions_dirty %>%
select(-region, -footnotes, -source) %>%
mutate(series = recode(series,
"Emissions (thousand metric tons of carbon dioxide)" =
"total_emissions",
"Emissions per capita (metric tons of carbon dioxide)" =
"per_capita_emissions")) %>%
pivot_wider(names_from = series, values_from = value) %>%
filter(year == 2005) %>%
select(-year) %>%
mutate(country = recode(country,
'Bolivia (Plurin. State of)' = 'Bolivia',
'United States of America' = 'United States',
'Venezuela (Boliv. Rep. of)' = 'Venezuela'))
anti_join(gapminder_data_2007, co2_emissions, by = 'country')
gapminder_data_2007_fixed <-
gapminder_data_2007 %>%
mutate(country = recode(country, 'Puerto Rico' = 'United States')) %>%
group_by(country) %>%
summarize(lifeExp = sum(lifeExp * pop)/sum(pop),
gdpPercap = sum(gdpPercap * pop)/sum(pop),
pop = sum(pop))
anti_join(gapminder_data_2007, co2_emissions, by = 'country')
gapminder_co2 <-
inner_join(gapminder_data_2007_fixed, co2_emissions, by = 'country')
gapminder_co2 %>%
mutate(region = if_else(country == 'Canada' |
country == 'United States' |
country == 'Mexico',
'north', 'south'))
View(gapminder_co2)
View(gapminder_co2)
gapminder_co2_final <-
gapminder_co2 %>%
mutate(region = if_else(country == 'Canada' |
country == 'United States' |
country == 'Mexico',
'north', 'south'))
write_csv(gapminder_co2_final, 'gapminder_co2.csv')
ggplot(gapminder_co2_final,
aes(x = gdpPercap,
y = per_capita_emissions)) +
geom_point()
ggplot(gapminder_co2_final,
aes(x = gdpPercap,
y = per_capita_emissions)) +
geom_point() +
labs(x = 'GDP (per capita)',
y = 'CO2 emitted (per capita)',
title = "There is a strong association between a nation's GDP \nand the amount of CO2 it produces")
ggplot(gapminder_co2_final,
aes(x = gdpPercap,
y = per_capita_emissions)) +
geom_point() +
labs(x = 'GDP (per capita)',
y = 'CO2 emitted (per capita)',
title = "There is a strong association between a nation's GDP \nand the amount of CO2 it produces") +
geom_smooth()
ggplot(gapminder_co2_final,
aes(x = gdpPercap,
y = per_capita_emissions)) +
geom_point() +
labs(x = 'GDP (per capita)',
y = 'CO2 emitted (per capita)',
title = "There is a strong association between a nation's GDP \nand the amount of CO2 it produces") +
geom_smooth(method = 'lm')
gapminder_co2_final %>%
group_by(region) %>%
summarize(sumtotal = sum(total_emissions),
sumpop = sum(pop))
setwd("~/Desktop/un-report/un-report")
ggplot(gapminder_data) +
aes(x = year,
y = pop/1000000) +
labs(x = Year,
y = Population (Millions)) +
geom_point() +
facet_wrap(rows = vars(continent))
ggplot(gapminder_data) +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(rows = vars(continent))
ggplot(gapminder_data) +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
outlier1 <-
gapminder_data %>%
select("Asia") %>%
filter(population == summarize(gapminder_data, maxPop = max(pop)))
View(gapminder_data)
View(gapminder_data)
outlier1 <-
gapminder_data %>%
filter(population == summarize(gapminder_data, maxPop = max(pop)))
outlier1 <-
gapminder_data %>%
filter(pop == summarize(gapminder_data, maxPop = max(pop)))
View(outlier1)
View(outlier1)
outlier1 <-
gapminder_data %>%
summarize(gapminder_data, maxPop = max(pop))
View(outlier1)
View(outlier1)
ggplot(gapminder_data) +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
inder_data %>%
summarize(maxPop = max(pop))
outlier1 <-
gapminder_data %>%
summarize(maxPop = max(pop))
View(outlier1)
View(outlier1)
outlier1 <-
gapminder_data %>%
select(pop == summarize(maxPop = max(pop)))
outlier1 <-
gapminder_data %>%
filter(pop == summarize(maxPop = max(pop)))
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop))
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop)
View(outlier1pop)
View(outlier1pop)
View(outlier1)
View(outlier1)
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop))
outlier1 <-
gapminder_data %>%
filter(pop < outlier1pop)
View(outlier1)
View(outlier1)
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
mutate(series = recode(series, "maxPop" = "pop"))
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
mutate(maxPop = "pop")
outlier1 <-
gapminder_data %>%
filter(pop < outlier1pop)
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
col_names("pop")
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
col_names(maxPop,"pop")
outlier1 <-
+   gapminder_data %>%
+   select(pop == summarize(maxPop = max(pop)))
outlier1 <-
gapminder_data %>%
select(pop == summarize(maxPop = max(pop)))
outlier1 <-
gapminder_data %>%
filter(pop == summarize(maxPop = max(pop)))
outlier1 <-
gapminder_data %>%
summarize(maxPop = max(pop))
outlier1 <-
gapminder_data %>%
pull(summarize(maxPop = max(pop))
pull()
outlier1 <-
gapminder_data %>%
summarize(maxPop = max(pop))%>%
pull()
outlier1
outlier1<-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country)
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop))%>%
pull()
outlier1<-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country)
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country ~= "China")
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country -= "China")
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(-country == "China")
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country -== "China")
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country ==! "China")
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country != "China")
summarize(maxPop = max(pop))
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country != "China")
#  summarize(maxPop = max(pop))
#  pull()
#outlier2 <-
# gapminder_data %>%
#  filter(pop == outlier2pop) %>%
#  select(country) %>%
#  pull()
View(outlier2pop)
outlier1pop <-
gapminder_data %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier1 <-
gapminder_data %>%
filter(pop == outlier1pop) %>%
select(country) %>%
pull()
outlier2pop <-
gapminder_data %>%
filter(country != "China") %>%
summarize(maxPop = max(pop)) %>%
pull()
outlier2 <-
gapminder_data %>%
filter(pop == outlier2pop) %>%
select(country) %>%
pull()
gapminder_data %>%
filter(country != outlier1 & country != outlier2) %>%
ggplot() +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
gapminder_data_no_outlier <-
gapminder_data %>%
filter(country != outlier1 & country != outlier2)
ggplot(gapminder_data_no_outlier) +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
ggplot(gapminder_data) +
aes(x = year,
y = pop/1000000,
color = continent) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
ggplot(gapminder_data_no_outlier) +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
gapminder_data_no_outlier <-
gapminder_data %>%
filter(country != outlier1 & country != outlier2)
ggplot(gapminder_data_no_outlier) +
aes(x = year,
y = pop/1000000) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
gapminder_data_no_outlier <-
gapminder_data %>%
filter(country != outlier1 & country != outlier2)
ggplot(gapminder_data_no_outlier) +
aes(x = year,
y = pop/1000000,
color = continent) +
labs(x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
gapminder_data %>%
filter(country != outlier1 & country != outlier2) %>%
ggplot() +
aes(x = year,
y = pop/1000000,
color = continent) +
labs(title = "Year vs. Population without Outliers",
x = "Year",
y = "Population (Millions)") +
geom_point() +
facet_wrap(vars(continent))
